<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:106.25%/1.45 'Cabin',serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Cabin',serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;color:hsla(0,0%,0%,0.9);font-family:'Arvo',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;color:hsla(0,0%,0%,0.9);font-family:'Arvo',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;color:hsla(0,0%,0%,0.9);font-family:'Arvo',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;color:hsla(0,0%,0%,0.9);font-family:'Arvo',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;color:hsla(0,0%,0%,0.9);font-family:'Arvo',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;color:hsla(0,0%,0%,0.9);font-family:'Arvo',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}ul{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;font-size:0.85rem;line-height:1.45rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;font-size:0.9rem;line-height:1.45rem;border-collapse:collapse;width:100%;border:1px solid hsla(0,0%,0%,0.12);border-radius:5px;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0.90625rem;padding-right:0;padding-top:0;margin-bottom:1.16rem;font-size:1.1487rem;line-height:1.45rem;border-left:0.54375rem solid #ff483b;color:hsla(0,0%,0%,0.65);font-style:italic;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.16rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.16rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;background-color:#eef0f159;}li{margin-bottom:calc(1.16rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.45rem;margin-bottom:calc(1.16rem / 2);margin-top:calc(1.16rem / 2);}li > ul{margin-left:1.45rem;margin-bottom:calc(1.16rem / 2);margin-top:calc(1.16rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.16rem / 2);}code{font-size:0.85rem;line-height:1.45rem;}kbd{font-size:0.85rem;line-height:1.45rem;}samp{font-size:0.85rem;line-height:1.45rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:0.96667rem;padding-right:0.96667rem;padding-top:0.725rem;padding-bottom:calc(0.725rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}a{color:#ff483b;text-decoration:none;text-shadow:.03em 0 #fff,-.03em 0 #fff,0 .03em #fff,0 -.03em #fff,.06em 0 #fff,-.06em 0 #fff,.09em 0 #fff,-.09em 0 #fff,.12em 0 #fff,-.12em 0 #fff,.15em 0 #fff,-.15em 0 #fff;background-image:linear-gradient(to top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0) 1px, #ff483b 1px, #ff483b 2px, rgba(0, 0, 0, 0) 2px);}a:hover,a:active{text-shadow:none;background-image:none;}h1,h2,h3,h4,h5,h6{line-height:1.2;margin-top:2.175rem;margin-bottom:0.725rem;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.45rem;color:hsla(0,0%,0%,0.8);font-style:normal;font-weight:400;}blockquote cite:before{content:"— ";}@media only screen and (max-width:480px){blockquote{border-left:0.27187rem solid #ff483b;padding-left:0.81562rem;font-style:italic;margin-left:-1.0875rem;margin-right:0;}}h2,h3{margin-bottom:0.725rem;margin-top:2.9rem;}th, td{padding-top:0.5rem;padding-bottom:calc(0.5rem - 1px);}th:first-child, td:first-child{padding-left:0.96rem;}</style><meta data-react-helmet="true" name="twitter:description" content="The visitor design pattern separates the operation to be performed from the object structure. We look at a concrete implementation in Rubocop, a Ruby linting and formatting library."/><meta data-react-helmet="true" name="twitter:title" content="Visitor Pattern in Ruby: Examples from Rubocop"/><meta data-react-helmet="true" name="twitter:creator" content="wasabigeek"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:description" content="The visitor design pattern separates the operation to be performed from the object structure. We look at a concrete implementation in Rubocop, a Ruby linting and formatting library."/><meta data-react-helmet="true" property="og:title" content="Visitor Pattern in Ruby: Examples from Rubocop"/><meta data-react-helmet="true" name="description" content="The visitor design pattern separates the operation to be performed from the object structure. We look at a concrete implementation in Rubocop, a Ruby linting and formatting library."/><meta name="theme-color" content="#663399"/><meta name="generator" content="Gatsby 4.9.2"/><style data-href="/styles.c0ea37b9b51f1d8565e5.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{background:#fafafa;color:#383a42;direction:ltr;font-family:Fira Code,Fira Mono,Menlo,Consolas,DejaVu Sans Mono,monospace;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:2;tab-size:2;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection{background:#e5e5e6;color:inherit}pre[class*=language-]{border-radius:.3em;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.2em .3em;white-space:normal}.token.cdata,.token.comment,.token.prolog{color:#a0a1a7}.token.doctype,.token.entity,.token.punctuation{color:#383a42}.token.atrule,.token.attr-name,.token.boolean,.token.class-name,.token.constant,.token.number{color:#b76b01}.token.keyword{color:#a626a4}.token.deleted,.token.important,.token.property,.token.symbol,.token.tag{color:#e45649}.token.attr-value,.token.attr-value>.token.punctuation,.token.builtin,.token.char,.token.inserted,.token.regex,.token.selector,.token.string{color:#50a14f}.token.function,.token.operator,.token.variable{color:#4078f2}.token.url{color:#0184bc}.token.attr-value>.token.punctuation.attr-equals,.token.special-attr>.token.attr-value>.token.value.css{color:#383a42}.language-css .token.selector{color:#e45649}.language-css .token.property{color:#383a42}.language-css .token.function,.language-css .token.url>.token.function{color:#0184bc}.language-css .token.url>.token.string.url{color:#50a14f}.language-css .token.atrule .token.rule,.language-css .token.important,.language-javascript .token.operator{color:#a626a4}.language-javascript .token.template-string>.token.interpolation>.token.interpolation-punctuation.punctuation{color:#ca1243}.language-json .token.operator{color:#383a42}.language-json .token.null.keyword{color:#b76b01}.language-markdown .token.url,.language-markdown .token.url-reference.url>.token.string,.language-markdown .token.url>.token.operator{color:#383a42}.language-markdown .token.url>.token.content{color:#4078f2}.language-markdown .token.url-reference.url,.language-markdown .token.url>.token.url{color:#0184bc}.language-markdown .token.blockquote.punctuation,.language-markdown .token.hr.punctuation{color:#a0a1a7;font-style:italic}.language-markdown .token.code-snippet{color:#50a14f}.language-markdown .token.bold .token.content{color:#b76b01}.language-markdown .token.italic .token.content{color:#a626a4}.language-markdown .token.list.punctuation,.language-markdown .token.strike .token.content,.language-markdown .token.strike .token.punctuation,.language-markdown .token.title.important>.token.punctuation{color:#e45649}.token.bold{font-weight:700}.token.comment,.token.italic{font-style:italic}.token.entity{cursor:help}.token.namespace{opacity:.8}.token.token.cr:before,.token.token.lf:before,.token.token.space:before,.token.token.tab:not(:empty):before{color:rgba(56,58,66,.2)}div.code-toolbar>.toolbar.toolbar>.toolbar-item{margin-right:.4em}div.code-toolbar>.toolbar.toolbar>.toolbar-item>a,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span{background:#e5e5e6;border-radius:.3em;color:#696c77;padding:.1em .4em}div.code-toolbar>.toolbar.toolbar>.toolbar-item>a:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>a:hover,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>button:hover,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span:focus,div.code-toolbar>.toolbar.toolbar>.toolbar-item>span:hover{background:#c6c7c7;color:#383a42}.line-highlight.line-highlight{background:rgba(56,58,66,.05)}.line-highlight.line-highlight:before,.line-highlight.line-highlight[data-end]:after{background:#e5e5e6;border-radius:.3em;box-shadow:0 2px 0 0 rgba(0,0,0,.2);color:#383a42;padding:.1em .6em}pre[id].linkable-line-numbers.linkable-line-numbers span.line-numbers-rows>span:hover:before{background-color:rgba(56,58,66,.05)}.command-line .command-line-prompt,.line-numbers.line-numbers .line-numbers-rows{border-right-color:rgba(56,58,66,.2)}.command-line .command-line-prompt>span:before,.line-numbers .line-numbers-rows>span:before{color:#9d9d9f}.rainbow-braces .token.token.punctuation.brace-level-1,.rainbow-braces .token.token.punctuation.brace-level-5,.rainbow-braces .token.token.punctuation.brace-level-9{color:#e45649}.rainbow-braces .token.token.punctuation.brace-level-10,.rainbow-braces .token.token.punctuation.brace-level-2,.rainbow-braces .token.token.punctuation.brace-level-6{color:#50a14f}.rainbow-braces .token.token.punctuation.brace-level-11,.rainbow-braces .token.token.punctuation.brace-level-3,.rainbow-braces .token.token.punctuation.brace-level-7{color:#4078f2}.rainbow-braces .token.token.punctuation.brace-level-12,.rainbow-braces .token.token.punctuation.brace-level-4,.rainbow-braces .token.token.punctuation.brace-level-8{color:#a626a4}pre.diff-highlight>code .token.token.deleted:not(.prefix),pre>code.diff-highlight .token.token.deleted:not(.prefix){background-color:rgba(255,82,102,.15)}pre.diff-highlight>code .token.token.deleted:not(.prefix) ::selection,pre.diff-highlight>code .token.token.deleted:not(.prefix)::selection,pre>code.diff-highlight .token.token.deleted:not(.prefix) ::selection,pre>code.diff-highlight .token.token.deleted:not(.prefix)::selection{background-color:rgba(251,86,105,.25)}pre.diff-highlight>code .token.token.inserted:not(.prefix),pre>code.diff-highlight .token.token.inserted:not(.prefix){background-color:rgba(25,255,91,.15)}pre.diff-highlight>code .token.token.inserted:not(.prefix) ::selection,pre.diff-highlight>code .token.token.inserted:not(.prefix)::selection,pre>code.diff-highlight .token.token.inserted:not(.prefix) ::selection,pre>code.diff-highlight .token.token.inserted:not(.prefix)::selection{background-color:rgba(56,224,98,.25)}.prism-previewer-gradient.prism-previewer-gradient div,.prism-previewer.prism-previewer:before{border-color:hsl(0,0,95%)}.prism-previewer-color.prism-previewer-color:before,.prism-previewer-easing.prism-previewer-easing:before,.prism-previewer-gradient.prism-previewer-gradient div{border-radius:.3em}.prism-previewer.prism-previewer:after{border-top-color:hsl(0,0,95%)}.prism-previewer-flipped.prism-previewer-flipped.after{border-bottom-color:hsl(0,0,95%)}.prism-previewer-angle.prism-previewer-angle:before,.prism-previewer-easing.prism-previewer-easing,.prism-previewer-time.prism-previewer-time:before{background:#fff}.prism-previewer-angle.prism-previewer-angle circle,.prism-previewer-time.prism-previewer-time circle{stroke:#383a42;stroke-opacity:1}.prism-previewer-easing.prism-previewer-easing circle,.prism-previewer-easing.prism-previewer-easing line,.prism-previewer-easing.prism-previewer-easing path{stroke:#383a42}.prism-previewer-easing.prism-previewer-easing circle{fill:transparent}:host,:root{--fa-font-solid:normal 900 1em/1 "Font Awesome 6 Solid";--fa-font-regular:normal 400 1em/1 "Font Awesome 6 Regular";--fa-font-light:normal 300 1em/1 "Font Awesome 6 Light";--fa-font-thin:normal 100 1em/1 "Font Awesome 6 Thin";--fa-font-duotone:normal 900 1em/1 "Font Awesome 6 Duotone";--fa-font-brands:normal 400 1em/1 "Font Awesome 6 Brands"}svg:not(:host).svg-inline--fa,svg:not(:root).svg-inline--fa{box-sizing:content-box;overflow:visible}.svg-inline--fa{display:var(--fa-display,inline-block);height:1em;overflow:visible;vertical-align:-.125em}.svg-inline--fa.fa-2xs{vertical-align:.1em}.svg-inline--fa.fa-xs{vertical-align:0}.svg-inline--fa.fa-sm{vertical-align:-.07143em}.svg-inline--fa.fa-lg{vertical-align:-.2em}.svg-inline--fa.fa-xl{vertical-align:-.25em}.svg-inline--fa.fa-2xl{vertical-align:-.3125em}.svg-inline--fa.fa-pull-left{margin-right:var(--fa-pull-margin,.3em);width:auto}.svg-inline--fa.fa-pull-right{margin-left:var(--fa-pull-margin,.3em);width:auto}.svg-inline--fa.fa-li{top:.25em;width:var(--fa-li-width,2em)}.svg-inline--fa.fa-fw{width:var(--fa-fw-width,1.25em)}.fa-layers svg.svg-inline--fa{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.fa-layers-counter,.fa-layers-text{display:inline-block;position:absolute;text-align:center}.fa-layers{display:inline-block;height:1em;position:relative;text-align:center;vertical-align:-.125em;width:1em}.fa-layers svg.svg-inline--fa{-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-text{left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter{background-color:var(--fa-counter-background-color,#ff253a);border-radius:var(--fa-counter-border-radius,1em);box-sizing:border-box;color:var(--fa-inverse,#fff);line-height:var(--fa-counter-line-height,1);max-width:var(--fa-counter-max-width,5em);min-width:var(--fa-counter-min-width,1.5em);overflow:hidden;padding:var(--fa-counter-padding,.25em .5em);right:var(--fa-right,0);text-overflow:ellipsis;top:var(--fa-top,0);-webkit-transform:scale(var(--fa-counter-scale,.25));transform:scale(var(--fa-counter-scale,.25));-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-bottom-right{bottom:var(--fa-bottom,0);right:var(--fa-right,0);top:auto;-webkit-transform:scale(var(--fa-layers-scale,.25));transform:scale(var(--fa-layers-scale,.25));-webkit-transform-origin:bottom right;transform-origin:bottom right}.fa-layers-bottom-left{bottom:var(--fa-bottom,0);left:var(--fa-left,0);right:auto;top:auto;-webkit-transform:scale(var(--fa-layers-scale,.25));transform:scale(var(--fa-layers-scale,.25));-webkit-transform-origin:bottom left;transform-origin:bottom left}.fa-layers-top-right{right:var(--fa-right,0);top:var(--fa-top,0);-webkit-transform:scale(var(--fa-layers-scale,.25));transform:scale(var(--fa-layers-scale,.25));-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-top-left{left:var(--fa-left,0);right:auto;top:var(--fa-top,0);-webkit-transform:scale(var(--fa-layers-scale,.25));transform:scale(var(--fa-layers-scale,.25));-webkit-transform-origin:top left;transform-origin:top left}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-2xs{font-size:.625em;line-height:.1em;vertical-align:.225em}.fa-xs{font-size:.75em;line-height:.08333em;vertical-align:.125em}.fa-sm{font-size:.875em;line-height:.07143em;vertical-align:.05357em}.fa-lg{font-size:1.25em;line-height:.05em;vertical-align:-.075em}.fa-xl{font-size:1.5em;line-height:.04167em;vertical-align:-.125em}.fa-2xl{font-size:2em;line-height:.03125em;vertical-align:-.1875em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:var(--fa-li-margin,2.5em);padding-left:0}.fa-ul>li{position:relative}.fa-li{left:calc(var(--fa-li-width, 2em)*-1);line-height:inherit;position:absolute;text-align:center;width:var(--fa-li-width,2em)}.fa-border{border:var(--fa-border-width,.08em) var(--fa-border-style,solid) var(--fa-border-color,#eee);border-radius:var(--fa-border-radius,.1em);padding:var(--fa-border-padding,.2em .25em .15em)}.fa-pull-left{float:left;margin-right:var(--fa-pull-margin,.3em)}.fa-pull-right{float:right;margin-left:var(--fa-pull-margin,.3em)}.fa-beat{-webkit-animation-delay:var(--fa-animation-delay,0);animation-delay:var(--fa-animation-delay,0);-webkit-animation-direction:var(--fa-animation-direction,normal);animation-direction:var(--fa-animation-direction,normal);-webkit-animation-duration:var(--fa-animation-duration,1s);animation-duration:var(--fa-animation-duration,1s);-webkit-animation-iteration-count:var(
    --fa-animation-iteration-count,infinite
  );animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-beat;animation-name:fa-beat;-webkit-animation-timing-function:var(--fa-animation-timing,ease-in-out);animation-timing-function:var(--fa-animation-timing,ease-in-out)}.fa-bounce{-webkit-animation-delay:var(--fa-animation-delay,0);animation-delay:var(--fa-animation-delay,0);-webkit-animation-direction:var(--fa-animation-direction,normal);animation-direction:var(--fa-animation-direction,normal);-webkit-animation-duration:var(--fa-animation-duration,1s);animation-duration:var(--fa-animation-duration,1s);-webkit-animation-iteration-count:var(
    --fa-animation-iteration-count,infinite
  );animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-bounce;animation-name:fa-bounce;-webkit-animation-timing-function:var(
    --fa-animation-timing,cubic-bezier(.28,.84,.42,1)
  );animation-timing-function:var(
    --fa-animation-timing,cubic-bezier(.28,.84,.42,1)
  )}.fa-fade{-webkit-animation-iteration-count:var(
    --fa-animation-iteration-count,infinite
  );animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-fade;animation-name:fa-fade;-webkit-animation-timing-function:var(
    --fa-animation-timing,cubic-bezier(.4,0,.6,1)
  );animation-timing-function:var(
    --fa-animation-timing,cubic-bezier(.4,0,.6,1)
  )}.fa-beat-fade,.fa-fade{-webkit-animation-delay:var(--fa-animation-delay,0);animation-delay:var(--fa-animation-delay,0);-webkit-animation-direction:var(--fa-animation-direction,normal);animation-direction:var(--fa-animation-direction,normal);-webkit-animation-duration:var(--fa-animation-duration,1s);animation-duration:var(--fa-animation-duration,1s)}.fa-beat-fade{-webkit-animation-iteration-count:var(
    --fa-animation-iteration-count,infinite
  );animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-beat-fade;animation-name:fa-beat-fade;-webkit-animation-timing-function:var(
    --fa-animation-timing,cubic-bezier(.4,0,.6,1)
  );animation-timing-function:var(
    --fa-animation-timing,cubic-bezier(.4,0,.6,1)
  )}.fa-flip{-webkit-animation-delay:var(--fa-animation-delay,0);animation-delay:var(--fa-animation-delay,0);-webkit-animation-direction:var(--fa-animation-direction,normal);animation-direction:var(--fa-animation-direction,normal);-webkit-animation-duration:var(--fa-animation-duration,1s);animation-duration:var(--fa-animation-duration,1s);-webkit-animation-iteration-count:var(
    --fa-animation-iteration-count,infinite
  );animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-flip;animation-name:fa-flip;-webkit-animation-timing-function:var(--fa-animation-timing,ease-in-out);animation-timing-function:var(--fa-animation-timing,ease-in-out)}.fa-shake{-webkit-animation-duration:var(--fa-animation-duration,1s);animation-duration:var(--fa-animation-duration,1s);-webkit-animation-iteration-count:var(
    --fa-animation-iteration-count,infinite
  );animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-shake;animation-name:fa-shake;-webkit-animation-timing-function:var(--fa-animation-timing,linear);animation-timing-function:var(--fa-animation-timing,linear)}.fa-shake,.fa-spin{-webkit-animation-delay:var(--fa-animation-delay,0);animation-delay:var(--fa-animation-delay,0);-webkit-animation-direction:var(--fa-animation-direction,normal);animation-direction:var(--fa-animation-direction,normal)}.fa-spin{-webkit-animation-duration:var(--fa-animation-duration,2s);animation-duration:var(--fa-animation-duration,2s);-webkit-animation-iteration-count:var(
    --fa-animation-iteration-count,infinite
  );animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-spin;animation-name:fa-spin;-webkit-animation-timing-function:var(--fa-animation-timing,linear);animation-timing-function:var(--fa-animation-timing,linear)}.fa-spin-reverse{--fa-animation-direction:reverse}.fa-pulse,.fa-spin-pulse{-webkit-animation-direction:var(--fa-animation-direction,normal);animation-direction:var(--fa-animation-direction,normal);-webkit-animation-duration:var(--fa-animation-duration,1s);animation-duration:var(--fa-animation-duration,1s);-webkit-animation-iteration-count:var(
    --fa-animation-iteration-count,infinite
  );animation-iteration-count:var(--fa-animation-iteration-count,infinite);-webkit-animation-name:fa-spin;animation-name:fa-spin;-webkit-animation-timing-function:var(--fa-animation-timing,steps(8));animation-timing-function:var(--fa-animation-timing,steps(8))}@media (prefers-reduced-motion:reduce){.fa-beat,.fa-beat-fade,.fa-bounce,.fa-fade,.fa-flip,.fa-pulse,.fa-shake,.fa-spin,.fa-spin-pulse{-webkit-animation-delay:-1ms;animation-delay:-1ms;-webkit-animation-duration:1ms;animation-duration:1ms;-webkit-animation-iteration-count:1;animation-iteration-count:1;transition-delay:0s;transition-duration:0s}}@-webkit-keyframes fa-beat{0%,90%{-webkit-transform:scale(1);transform:scale(1)}45%{-webkit-transform:scale(var(--fa-beat-scale,1.25));transform:scale(var(--fa-beat-scale,1.25))}}@keyframes fa-beat{0%,90%{-webkit-transform:scale(1);transform:scale(1)}45%{-webkit-transform:scale(var(--fa-beat-scale,1.25));transform:scale(var(--fa-beat-scale,1.25))}}@-webkit-keyframes fa-bounce{0%{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}10%{-webkit-transform:scale(var(--fa-bounce-start-scale-x,1.1),var(--fa-bounce-start-scale-y,.9)) translateY(0);transform:scale(var(--fa-bounce-start-scale-x,1.1),var(--fa-bounce-start-scale-y,.9)) translateY(0)}30%{-webkit-transform:scale(var(--fa-bounce-jump-scale-x,.9),var(--fa-bounce-jump-scale-y,1.1)) translateY(var(--fa-bounce-height,-.5em));transform:scale(var(--fa-bounce-jump-scale-x,.9),var(--fa-bounce-jump-scale-y,1.1)) translateY(var(--fa-bounce-height,-.5em))}50%{-webkit-transform:scale(var(--fa-bounce-land-scale-x,1.05),var(--fa-bounce-land-scale-y,.95)) translateY(0);transform:scale(var(--fa-bounce-land-scale-x,1.05),var(--fa-bounce-land-scale-y,.95)) translateY(0)}57%{-webkit-transform:scale(1) translateY(var(--fa-bounce-rebound,-.125em));transform:scale(1) translateY(var(--fa-bounce-rebound,-.125em))}64%{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}to{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}}@keyframes fa-bounce{0%{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}10%{-webkit-transform:scale(var(--fa-bounce-start-scale-x,1.1),var(--fa-bounce-start-scale-y,.9)) translateY(0);transform:scale(var(--fa-bounce-start-scale-x,1.1),var(--fa-bounce-start-scale-y,.9)) translateY(0)}30%{-webkit-transform:scale(var(--fa-bounce-jump-scale-x,.9),var(--fa-bounce-jump-scale-y,1.1)) translateY(var(--fa-bounce-height,-.5em));transform:scale(var(--fa-bounce-jump-scale-x,.9),var(--fa-bounce-jump-scale-y,1.1)) translateY(var(--fa-bounce-height,-.5em))}50%{-webkit-transform:scale(var(--fa-bounce-land-scale-x,1.05),var(--fa-bounce-land-scale-y,.95)) translateY(0);transform:scale(var(--fa-bounce-land-scale-x,1.05),var(--fa-bounce-land-scale-y,.95)) translateY(0)}57%{-webkit-transform:scale(1) translateY(var(--fa-bounce-rebound,-.125em));transform:scale(1) translateY(var(--fa-bounce-rebound,-.125em))}64%{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}to{-webkit-transform:scale(1) translateY(0);transform:scale(1) translateY(0)}}@-webkit-keyframes fa-fade{50%{opacity:var(--fa-fade-opacity,.4)}}@keyframes fa-fade{50%{opacity:var(--fa-fade-opacity,.4)}}@-webkit-keyframes fa-beat-fade{0%,to{opacity:var(--fa-beat-fade-opacity,.4);-webkit-transform:scale(1);transform:scale(1)}50%{opacity:1;-webkit-transform:scale(var(--fa-beat-fade-scale,1.125));transform:scale(var(--fa-beat-fade-scale,1.125))}}@keyframes fa-beat-fade{0%,to{opacity:var(--fa-beat-fade-opacity,.4);-webkit-transform:scale(1);transform:scale(1)}50%{opacity:1;-webkit-transform:scale(var(--fa-beat-fade-scale,1.125));transform:scale(var(--fa-beat-fade-scale,1.125))}}@-webkit-keyframes fa-flip{50%{-webkit-transform:rotate3d(var(--fa-flip-x,0),var(--fa-flip-y,1),var(--fa-flip-z,0),var(--fa-flip-angle,-180deg));transform:rotate3d(var(--fa-flip-x,0),var(--fa-flip-y,1),var(--fa-flip-z,0),var(--fa-flip-angle,-180deg))}}@keyframes fa-flip{50%{-webkit-transform:rotate3d(var(--fa-flip-x,0),var(--fa-flip-y,1),var(--fa-flip-z,0),var(--fa-flip-angle,-180deg));transform:rotate3d(var(--fa-flip-x,0),var(--fa-flip-y,1),var(--fa-flip-z,0),var(--fa-flip-angle,-180deg))}}@-webkit-keyframes fa-shake{0%{-webkit-transform:rotate(-15deg);transform:rotate(-15deg)}4%{-webkit-transform:rotate(15deg);transform:rotate(15deg)}24%,8%{-webkit-transform:rotate(-18deg);transform:rotate(-18deg)}12%,28%{-webkit-transform:rotate(18deg);transform:rotate(18deg)}16%{-webkit-transform:rotate(-22deg);transform:rotate(-22deg)}20%{-webkit-transform:rotate(22deg);transform:rotate(22deg)}32%{-webkit-transform:rotate(-12deg);transform:rotate(-12deg)}36%{-webkit-transform:rotate(12deg);transform:rotate(12deg)}40%,to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}@keyframes fa-shake{0%{-webkit-transform:rotate(-15deg);transform:rotate(-15deg)}4%{-webkit-transform:rotate(15deg);transform:rotate(15deg)}24%,8%{-webkit-transform:rotate(-18deg);transform:rotate(-18deg)}12%,28%{-webkit-transform:rotate(18deg);transform:rotate(18deg)}16%{-webkit-transform:rotate(-22deg);transform:rotate(-22deg)}20%{-webkit-transform:rotate(22deg);transform:rotate(22deg)}32%{-webkit-transform:rotate(-12deg);transform:rotate(-12deg)}36%{-webkit-transform:rotate(12deg);transform:rotate(12deg)}40%,to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.fa-rotate-90{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.fa-flip-vertical{-webkit-transform:scaleY(-1);transform:scaleY(-1)}.fa-flip-both,.fa-flip-horizontal.fa-flip-vertical{-webkit-transform:scale(-1);transform:scale(-1)}.fa-rotate-by{-webkit-transform:rotate(var(--fa-rotate-angle,none));transform:rotate(var(--fa-rotate-angle,none))}.fa-stack{display:inline-block;height:2em;position:relative;vertical-align:middle;width:2.5em}.fa-stack-1x,.fa-stack-2x{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;z-index:var(--fa-stack-z-index,auto)}.svg-inline--fa.fa-stack-1x{height:1em;width:1.25em}.svg-inline--fa.fa-stack-2x{height:2em;width:2.5em}.fa-inverse{color:var(--fa-inverse,#fff)}.fa-sr-only,.fa-sr-only-focusable:not(:focus),.sr-only,.sr-only-focusable:not(:focus){clip:rect(0,0,0,0);border-width:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.svg-inline--fa .fa-primary{fill:var(--fa-primary-color,currentColor);opacity:var(--fa-primary-opacity,1)}.svg-inline--fa .fa-secondary{fill:var(--fa-secondary-color,currentColor)}.svg-inline--fa .fa-secondary,.svg-inline--fa.fa-swap-opacity .fa-primary{opacity:var(--fa-secondary-opacity,.4)}.svg-inline--fa.fa-swap-opacity .fa-secondary{opacity:var(--fa-primary-opacity,1)}.svg-inline--fa mask .fa-primary,.svg-inline--fa mask .fa-secondary{fill:#000}.fa-duotone.fa-inverse,.fad.fa-inverse{color:var(--fa-inverse,#fff)}.secondary-link{background-image:none;color:#9ca3af;margin-right:.8rem}.secondary-link:hover{color:#111827}a.autolink-anchor{background-image:none}</style><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-1J86VZ2B2D"></script><script>
    window.GATSBY_GTAG_PLUGIN_GA_TRACKING_ID = (
      'G-1J86VZ2B2D'
    );
    window.GATSBY_GTAG_PLUGIN_ANONYMIZE = true;

    var options = {
      send_page_view: false
    };
    if (true) {
      options.anonymize_ip = true;
    }

    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    window.gtag = gtag;
    gtag('js', new Date());
    gtag('config', 'G-1J86VZ2B2D', options);
  </script><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){if(void 0===e.target.dataset.mainImage)return;if(void 0===e.target.dataset.gatsbyImageSsr)return;const t=e.target;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><style type="text/css">
    .autolink-anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .autolink-anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .autolink-anchor svg,
    h2 .autolink-anchor svg,
    h3 .autolink-anchor svg,
    h4 .autolink-anchor svg,
    h5 .autolink-anchor svg,
    h6 .autolink-anchor svg {
      visibility: hidden;
    }
    h1:hover .autolink-anchor svg,
    h2:hover .autolink-anchor svg,
    h3:hover .autolink-anchor svg,
    h4:hover .autolink-anchor svg,
    h5:hover .autolink-anchor svg,
    h6:hover .autolink-anchor svg,
    h1 .autolink-anchor:focus svg,
    h2 .autolink-anchor:focus svg,
    h3 .autolink-anchor:focus svg,
    h4 .autolink-anchor:focus svg,
    h5 .autolink-anchor:focus svg,
    h6 .autolink-anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="alternate" type="application/rss+xml" title="wasabigeek&#x27;s blog" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=2024985cd1fb9cd6a58693ffa2e9ed8c" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=2024985cd1fb9cd6a58693ffa2e9ed8c"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=2024985cd1fb9cd6a58693ffa2e9ed8c"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=2024985cd1fb9cd6a58693ffa2e9ed8c"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=2024985cd1fb9cd6a58693ffa2e9ed8c"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=2024985cd1fb9cd6a58693ffa2e9ed8c"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=2024985cd1fb9cd6a58693ffa2e9ed8c"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=2024985cd1fb9cd6a58693ffa2e9ed8c"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=2024985cd1fb9cd6a58693ffa2e9ed8c"/><title data-react-helmet="true">Visitor Pattern in Ruby: Examples from Rubocop | wasabigeek</title><link href="//fonts.googleapis.com/css?family=Arvo:700|Cabin:400,400i,700" rel="stylesheet" type="text/css"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/><link as="script" rel="preload" href="/webpack-runtime-de14b2b98e48ea8035f2.js"/><link as="script" rel="preload" href="/framework-2f1bb0a7f52c344d3ae3.js"/><link as="script" rel="preload" href="/app-98b4b141361695085efe.js"/><link as="script" rel="preload" href="/a9a7754c-fd708a4b56a7540148ed.js"/><link as="script" rel="preload" href="/commons-54de20a7f53efccffaf6.js"/><link as="script" rel="preload" href="/789f7d7b6ffc49f28e70e7c9aef0b26f21ecb947-2a715c18d2ef65f9913f.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-850983fc2fd918503030.js"/><link as="fetch" rel="preload" href="/page-data/blog/visitor-pattern-in-ruby-rubocop/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2744205926.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2841359383.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto;max-width:34.8rem;padding:2.175rem 1.0875rem"><header><h3 style="margin-top:0"><a style="box-shadow:none;color:inherit" href="/blog">wasabigeek</a></h3></header><main><article><header><h1 style="margin-top:1.45rem;margin-bottom:0">Visitor Pattern in Ruby: Examples from Rubocop</h1><p style="font-size:0.87055rem;line-height:1.45rem;display:block;margin-bottom:1.45rem">August 09, 2022</p></header><section><p>In this post, we’ll learn about the Visitor design pattern and it’s tradeoffs by looking at a real world example: Rubocop, a Ruby linting and formatting library.</p>
<h2 id="what-is-the-visitor-design-pattern" style="position:relative;"><a href="#what-is-the-visitor-design-pattern" aria-label="what is the visitor design pattern permalink" class="autolink-anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is the Visitor design pattern?</h2>
<p>The visitor design pattern separates the operation to be performed from a complex object structure (e.g. a tree whose nodes have many types).</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 385px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/80a5d06b70a8b1e494163786d54394f5/409e6/visitor.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 86.48648648648648%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAADv0lEQVQ4y21U30sjVxQ+MSJE31rLgi6UPrR9KCvbItv9D1rwbZ/qQ/tQ2G6ffCkiaLEgPhRFUDCKJkIFCSEiIvqi0Qjij1iNJpnRuTNzZyZ3dOLkJ4Zau5pNbjmDCVvshcuZezjnu+ee7zsDAOAGgM6GhobnLpfrawD4CgCa4X+Wz+dz9vr6OgwPD6OrAQA+A4Ang4ODsLa2BtDa2grt7e0tAPBRU1NTu8fj+bClpQU8Hs8jwOnpaZiamgKv19s8Pz//NBQKtc3Ozn7i9Xo/DgaDbX6//wn4/X5XIBCA7u5u9+TkJPT09MDAwICrt7f3EaBhGG5d10GW5e/v7u7+yefzV4lEwjZN0y6Xy9f5fP5PSCQSsLu722nbNmOMrfX19XkmJibQ9wiQMdbIGEPgN8VikedyOX5xccGvrq54qVTitm2nQFEUEAShj1LKdV3ngiB8Kooi6LreWANaWlpyrCzLbk3TQNO014lEgu/t7d2LoliJxWLvTk5OOCFEgZWVFRgaGmrLZDI+SukvANAYiUSgWq0C57y+cWma5gBSSl9fXl5yxljZsqyqaZoVPBuGQTHYhaxiUqFQwLzWg4ODb23bfoG+SqXiqgFSSp0eYoWKovBkMnlPKa1IkvTu/Pyca5qm1m53KJ2bm4P9/f1vDMNwbt/Y2PgyHA5DNBpFeThtMAwD7RvGGMc2pVIpp1WmaWJOCvvyq67rx8fHxx22bUMoFHqlaRoGvN3a2urY3t6Gw8NDB1CSJLcsy0AI+UFRlLeiKNqU0pwkSVlVVUuU0iPAUi3L4rFYbO6h2mafz/cqEom83NzchJ2dnfqTx8fHYWxsDEZHRz8IBALPw+Hws2g0+gzt4uJix8zMzOeQSqV+z+VyJ/F4/EUqlXIS3yfjfVIYY26Ujaqq35XL5UyhUFDj8biWTqcp5/yiWCxu1xNKpRKMjIxAV1dX48LCQicCLC8vO/vo6Og/OtR1/WfUYSaTcfqXTqf59fU16vHCYfkB1I2WEPJHNpvlkiT99uBvWF1dfcQyEiKK4j1KRlGUMp41TVMc0eLo1SpVVTWBmiKELNUA8WdQA6zpEAEIIQhUlWUZQZF1Wh8ry7JclmUhk19ks9mBZDL5FCXCGKuToqpqvUJCCBJZliSpKghCJZlMckVR1DrgQzWufD7vfCNBNzc3rtvb2zopuq67H3T4E84wY6yCCkFNojVNU3MCg8Fg/cmmaWJFbkEQXJlMBlCb/f39TtzZ2ZmbEIJS+xHldnp6+hch5G9BEG5wWhRFEf8FwsopIuWgP/oAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="visitor.png"
        title="visitor.png"
        src="/static/80a5d06b70a8b1e494163786d54394f5/409e6/visitor.png"
        srcset="/static/80a5d06b70a8b1e494163786d54394f5/12f09/visitor.png 148w,
/static/80a5d06b70a8b1e494163786d54394f5/e4a3f/visitor.png 295w,
/static/80a5d06b70a8b1e494163786d54394f5/409e6/visitor.png 385w"
        sizes="(max-width: 385px) 100vw, 385px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>This makes it easier to introduce new operations (“visitors”) for the same structure, at the cost that changing the object structure requires all visitors to be changed. So this pattern works best when changes to the underlying structure are rare, and we expect many different operations to be introduced.</p>
<h2 id="what-is-rubocop" style="position:relative;"><a href="#what-is-rubocop" aria-label="what is rubocop permalink" class="autolink-anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is Rubocop?</h2>
<p>Rubocop is a linter<sup id="fnref-2"><a href="#fn-2" class="footnote-ref">2</a></sup> and formatter, which is a fancy way of saying that it checks the raw source code against a set of rules (e.g. for common errors or conformance to a style guide) and can autocorrect it. Each rule in Rubocop is called a “cop” and follows a visitor-inspired pattern.</p>
<p>Note that Rubocop doesn’t follow the classical visitor implementation<sup id="fnref-3"><a href="#fn-3" class="footnote-ref">3</a></sup> exactly, but separates concerns similarly. We’ll look at how the pattern is implemented, before looking at how it powers each of the above features.</p>
<h2 id="object-structure-abstract-syntax-tree-ast" style="position:relative;"><a href="#object-structure-abstract-syntax-tree-ast" aria-label="object structure abstract syntax tree ast permalink" class="autolink-anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Object Structure: Abstract Syntax Tree (AST)</h2>
<p>Before running any cops, Rubocop first uses the <a href="https://github.com/whitequark/parser">parser</a> library to create an Abstract Syntax Tree representing your Ruby code. This makes the responsibility of cops much simpler: they don’t have to worry about syntax correctness, and because code is pre-grouped and categorised in the tree, it’s easier to know when a linting rule should be triggered.</p>
<p>Let’s look at a simple example (try it in <code class="language-text">irb</code>!):</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token keyword">require</span> <span class="token string-literal"><span class="token string">'parser/current'</span></span>

code_string <span class="token operator">=</span> <span class="token string-literal heredoc-string"><span class="token delimiter"><span class="token punctuation">&lt;&lt;~</span><span class="token symbol">CODE</span></span><span class="token string">
  private def sum(a, b)
    a + b
  end

  sum(1, 2)
</span><span class="token delimiter"><span class="token symbol">CODE</span></span></span>
<span class="token comment"># => "private def sum(a, b)\n a + b\nend\n\nsum(1, 2)\n"</span>

Parser<span class="token double-colon punctuation">::</span>CurrentRuby<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>code_string<span class="token punctuation">)</span>
<span class="token comment"># =></span>
<span class="token comment"># s(:begin,</span>
<span class="token comment">#   s(:send, nil, :private,</span>
<span class="token comment">#     s(:def, :sum,</span>
<span class="token comment">#       s(:args,</span>
<span class="token comment">#         s(:arg, :a),</span>
<span class="token comment">#         s(:arg, :b)),</span>
<span class="token comment">#       s(:send,</span>
<span class="token comment">#         s(:lvar, :a), :+,</span>
<span class="token comment">#         s(:lvar, :b))),</span>
<span class="token comment">#   s(:send, nil, :sum,</span>
<span class="token comment">#     s(:int, 1),</span>
<span class="token comment">#     s(:int, 2)))</span></code></pre></div>
<p>The parsed AST breaks down the code into relevant constructs based on Ruby’s syntax. We can visualize the above:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/fa167f4ce62165dacc4468696a171423/8ce52/ruby_ast_example.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 79.72972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAADwklEQVQ4y3VSfWgbZRh/7rK0OqaIKzIYdog4HK66OZ3raFe66Ryof8iCImwgsvmPokyRgaKIGyobKwPFqYigbDrYUPBr0dZ+JLm0Ta5JmuSSXHNJ7vsub+6SXK+xWiUn7zUJ69AHHp7nfT5+7/N73hd29D8GO/cedPWe7bsBi2edF36dKRGc7QBrO92hpKIHk9qJQEKCsUjBg2sIgnBr79+9Hx4ePAQPDRyCHXsehY44jkNgPTA82Im9M3LRjQcS8rEIW++boHl8dnO7HhlwfZzn6w5oyw7ECotrAF3t6dnYDQCuer1d2Ha1c5vv3HJTO3d7zx3Y9+B4Tm8CZziQkv4C+M5Pkf4QA8F55bNAQnk/wqhw6fsxz11bt7sXbdzUC1zF8Xx1dYzE51tuvQ3Of36ZZJEDVMbsDc7Ls4Gk3jeVUGA0UiTxzWS8sAjTTPksldLfTJbqbmw6vwxPHT7igtZaNPf090M6nXZp0qID0fzi5nBa91NMZVuIMaHuOGR7J542rbb/2tvn4JWTpzo7w9bn88HQ0NCa2HV9pGslSUoihO7LZLJf5LLMqVDWHqRSWpytOzf/GMp3GsapOPClIiCEQBTFK4qifFgscNeyRf10OGP8EmWrH1Bp5AfTNL/mef5uUZJOyhJ/3B+Rd0VyxqULlyfXY6CDT/o8N05jGMZpVdNeKuvauQWh8iLN2SNznPUyzVkjbkGpVIJms3kjBWLrtj73JfGr/tmiuW9gr5tfWVmBf/5eAd1srO1rNpte0zSBF4Rjksj/HmXNZ6m0nmKrzoYfghx+kO7gvBIOpbTnwykVJmMC3hXZaDTWoUoFVFXdh1CFVhRlRBTFCSiXy+QqoHigrKvvzmYr/VRa/0hoOF0TzB9gO45nOoPO0Hlr+OdQDqikSibicxiIwH2SJN1bq9XOaJp2VNW09zqjyrIMzRbVNuXWn/det4b1X377E5w9fwHM+pIbw6DYNhoNWFpaWl32DGuR4Wwd5jhr/2y2komytU9mMmgqulC7OJ3Wr9Rr5mhRLH8cZhBL560H40Ub5vIW2QLEA5C2bbsKsVgMAoxFTCYNmEpXt/wWFV8fT6AnRqPS8YlE+Rn/TOk526qe4AT96Wuz4htBprZpKmXCZNIgaJp2+/Fnj0ajkMlkVjkJRZbIMvOQz6V7hRL3qiwUHy/kcy9osnCYW8j6NE2FCDW+gS/m30Ka2LPcsKCiy/C/IssyKUkSSLI8bBjGgqZpnyKEggihqwihb6rVKvC88IBhmqYoSjtNswq6rpP/BfYvm0XPd5EAuMYAAAAASUVORK5CYII='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="ruby_ast_example.png"
        title="ruby_ast_example.png"
        src="/static/fa167f4ce62165dacc4468696a171423/fcda8/ruby_ast_example.png"
        srcset="/static/fa167f4ce62165dacc4468696a171423/12f09/ruby_ast_example.png 148w,
/static/fa167f4ce62165dacc4468696a171423/e4a3f/ruby_ast_example.png 295w,
/static/fa167f4ce62165dacc4468696a171423/fcda8/ruby_ast_example.png 590w,
/static/fa167f4ce62165dacc4468696a171423/8ce52/ruby_ast_example.png 681w"
        sizes="(max-width: 590px) 100vw, 590px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>For now, it’s sufficient to know that the object structure is basically a tree - don’t worry too much if you don’t understand exactly how it works. (For a good overview of how this AST fits into the Ruby interpretation process, check out this <a href="https://youtu.be/ySuMOEVLaMw">great video</a> by <a href="https://twitter.com/OngMaple">@OngMaple</a>. You can also look <a href="https://github.com/rubocop/rubocop-ast/blob/master/docs/modules/ROOT/pages/node_types.adoc">here</a> for a list of possible node types 🤯.)</p>
<h2 id="visitor-cops" style="position:relative;"><a href="#visitor-cops" aria-label="visitor cops permalink" class="autolink-anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Visitor: Cops</h2>
<p>Each linting or formatting rule in Rubocop is encapsulated in a “cop”, which is essentially a visitor. For example, let’s look at the <a href="https://github.com/rubocop/rubocop/blob/master/lib/rubocop/cop/layout/def_end_alignment.rb">DefEndAlignment</a> cop. By default, this checks that <code class="language-text">end</code> is aligned to <code class="language-text">def</code> at the start of the line, e.g.:</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># bad</span>
<span class="token keyword">def</span> <span class="token method-definition"><span class="token function">foo</span></span>
    <span class="token keyword">end</span>

<span class="token comment"># good</span>
<span class="token keyword">def</span> <span class="token method-definition"><span class="token function">foo</span></span>
<span class="token keyword">end</span></code></pre></div>
<p>Each cop defines <code class="language-text">on_#{node_type}</code> methods, which the traversal mechanism will call when it hits a corresponding AST node. We can see the cop handles 3 node types, <code class="language-text">on_def</code>, <code class="language-text">on_defs</code> and <code class="language-text">on_send</code>:</p>
<div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token keyword">def</span> <span class="token method-definition"><span class="token function">on_def</span></span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
  <span class="token comment"># ...</span>
<span class="token keyword">end</span>
<span class="token keyword">alias</span> on_defs on_def

<span class="token keyword">def</span> <span class="token method-definition"><span class="token function">on_send</span></span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>
  <span class="token comment"># ...</span>
<span class="token keyword">end</span></code></pre></div>
<p>(<code class="language-text">on_send</code> might seem out-of-place - it’s for handling “def modifiers” e.g. <code class="language-text">private</code> in <code class="language-text">private def foo</code>.)</p>
<p>If you recall the AST from before, there weren’t any <code class="language-text">end</code> nodes, and the structure itself left out indentations and spaces. So how does this linter work? Turns out that <code class="language-text">parser</code> nodes still contain information about the source code (e.g. positions), and cops can use this in tandem with the original source code for linting.</p>
<p>Of note: this cop also does it’s own little traversal for <code class="language-text">on_send</code>. This is because the <code class="language-text">send</code> node contains the start position of the <code class="language-text">private</code> keyword, but the position of <code class="language-text">end</code> is still in the  <code class="language-text">def</code> node. Thus, the code accesses <a href="https://github.com/rubocop/rubocop/blob/133ffce3d3179f6cf2d7750da2a2da0add8c7e41/lib/rubocop/cop/layout/def_end_alignment.rb#L51">descendants</a> to look for the actual <code class="language-text">def</code> node. A visual from our previous example:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 212px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/31cc05831c7b3e162da8b84f4e3b6440/9f128/on_send_def_traversal.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 71.62162162162163%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADT0lEQVQ4y41TX0xTZxQ/lzKnTz5MZpNpdDAyMrcEzUwajWJ82R6W+LC5CcO9zF4UjAnBB/89eE2JksADxr2Arsw5l2ywlHvL6N1tg7SlVdbeUitevBS95baG9rYUI7belvWYr2qyLVnGL/nl9/055/ed5HwH4F9ARDh4liVKkbVneulkRC08m04Udf+D5U5yRmi5HoD2y274X5BgQdQqHEENRgMpU1h5hqHZDP4pJTEYXcKxyNJnk9E8+GaeGNovj6/O0Ht/qfJONAd+ebmZmFy9ac/1/8Tl3KKCYmylQysgzGml1RsO+xKUdVSG70flTVNKPv0wjahkECOqXhh0xz4ccsfAEUhWfH08AKvGyES0YlIugs2bqvdKjx0eKe6x307uSWYQbKLDcHqoiWI4M8VwdFnPs2ZgWPN/G7773vvlxnQPfQeH+mtrmvvqP7oi9ELL9V1gGWktJzMcIf03pf/h8QYAvAkAa8qkqDVvb1m/llyc+fHILou9taVz5MQ2hjXvYDh6O8PS9Qxn3s5wdD3Dmt9hWBoIoa6ujiJJ1dXVm41G42aDwbABAKoIqQqooqBywyeH9tZ09B0+cNHR1nB++EgDw9ENDGvex7D0bou97XOLvbXv0u8dteeGv3xZWiqVIvIBachrGI3Gsu7d00BkHQC81XK2GToDh6FzpA0ucN/CqcFvwD+zDKeGDt5svLpx07nBEy+76nK5jvI87+V5/hjZm0wm6O7uNkSjUejp6dnqdDpv8H/ww9Yfrm3DLMLP4wOVtkct5Y/vDGlN49MqP3Y33QFgomBiYuJSoVBAAl3X0e/3M7qul6trbGysSiaTj/AVMplMtqurq+arA/vhgYYwFk4fkxIFVBYR5eRf6L63eANUVS0Vi8UVQRD0UqlEkuZIc2w2GwSDwSZRFNHj8eSdTmfO5/NhKBRqfz1+U8rzgDi7iFeu/aoL/pnCbAoRZFmWyeuapulEFUXxkuDe3l5gWXZfLBbDbDaLCwsLK6qqosvl+iISDsITRJicXf5Nij9Ht6joEeUpTin5LFit1p2JRGKemMXj8fmBgYGPBUEgFRiIcTgc7srn81gsFlGSpP5X00SN3XsKv9xSaoMPc9JcGvHuvJ5i/YlPXwAv1yLiTz5IgQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="on_send_def_traversal.png"
        title="on_send_def_traversal.png"
        src="/static/31cc05831c7b3e162da8b84f4e3b6440/9f128/on_send_def_traversal.png"
        srcset="/static/31cc05831c7b3e162da8b84f4e3b6440/12f09/on_send_def_traversal.png 148w,
/static/31cc05831c7b3e162da8b84f4e3b6440/9f128/on_send_def_traversal.png 212w"
        sizes="(max-width: 212px) 100vw, 212px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<p>Also note that unlike the classical implementation, cops do not implement methods for all node types. Instead, there’s logic that skips non-existent methods during traversal, which is a nice segue to our next section.</p>
<h2 id="execution--traversal" style="position:relative;"><a href="#execution--traversal" aria-label="execution  traversal permalink" class="autolink-anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Execution &#x26; Traversal</h2>
<p>Object structure and visitors meet in the <a href="https://github.com/rubocop/rubocop/blob/2fe4b1a6faca23adff13e1bbff6ecf5b66c6447b/lib/rubocop/cop/commissioner.rb#L79-L93">Rubocop::Commissioner#investigate</a> method. This method walks the tree and for each node, executes the respective <code class="language-text">on_#{node_type}</code> method on all enabled cops.</p>
<p>The actual implementation is a little convoluted, with a fair amount of metaprogramming. It’s a fun detour, but feel free to skip this! First, my attempt to visualise the flow with a sequence diagram:</p>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 411px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/11a55fd9d5d7db346616d26a674a8543/2a432/rubocop_traversal.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 102.7027027027027%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFMklEQVQ4y4VTa0xTZxh+C7UDcbKiTNBoYInZYkI2RjLdmAGZzpmpU1hcNg1xLjHZsvjHEJOxC3PTuhmcv0CjGQ4ichkg9EYrOy13elFoOfTOOT3ntGBLgRYoFYu8y+lKMreZvcmT7z3nPHm+8z3f84LNZgObzfYWTdPIMMwKTdMrHMehx+PRIyIgopCiKLDb7YUURSH/neexLIssy/bHOQJYLY/HA16vd5fX60WO48I0TYf5fnp6epUs9Pl8PG+3x+NBv9+/wLJsmN/U7/dr/y64vLwMUFZWxkNUV1e3VaPRbKmoqNheUvJhZto6SB52LEGA6RYhTiS0NlSlNDbc3qZQKLecO3fupXf379+0J39H8rBlCmbcCuHyTK8wGugWwo0bN2LQ6/XAMAzs27c/eaC//+iYjTni9mFWdNYI+FgPGBoCr0sLI2YrVFdfyzAY9KWaXuP7TmYud8mnBnx0HzCiB6ivr49BLpcn1NbWwvnvv81s75CdcZDdNGMjDBjsOYtzA+UYHjq/4JG+Yh1WwvVrVa9qtD3fjRo7XeNjBINzg+UY6v8KF4bK4Z+1bu2aDN4Xt/mO3KCtQcdwC85yBHpscvTZm48O99XC+pSEGIcZbdTwHOdwKwY9GvTaFRg7Jo/5+XkoKiqC05+WPNdUUwGctcNgNbbgqK4JdZrfkCalGPYqj+DCA7h84WzK9StngB272zOmb0bzYMPiwL1fl0hd01Lsr+I3FevzXns5CReGIMTKP59xd1bPe7sqA5SycmW2v2rZr9iBizo4efxgSsjbA0FW3T/NEDg30bPCr8tBPcJ/1JrfG2oS5qZIYCkz+Lx2oJ0jEA66ATEEuOgSFOTnJnFWOYQ49T3+mKxFOseMScPRmcEwVFdX7zUajXc0Gk2jUqks5hUPHzoIU/7JTXa77QTjpj9yOh0nXC7He3zeHj9BSF2/VoSRdoh6ajbgkmwzPlFm4EpnZtBxPRNycnKyJRLJ9vLy8u0HDhzYmpqa+gJ//OLi4k0ymexrgiDKVCrVN62traVxW8TitLSUmFVLKkAcBEQDIN6HR94WgMLCQrh58yZcvXoVCgoKeF4iSZK7TCbTMYvFUkiSZJHZbN5jtVr3kST5iU6n2wEACROTAfBZbwnmmeanALm5uYLKykpBaWnp6jyura+vP9nX1/ezWq2WqNXqSyqV6pJWq71IEMTltra2d3hSKBQSwP/VqVOnICsrKymWQ7cbdDoduFwusFgsQNM0BAIB8HAsvP3m60lzrEIYoBTCaVoZW2fcncJZViX8l2h2dnYyL9jb27vbaDS2j4yM1JtMphaDwVCt0+lf3Jyx8XneFtrcBO7RlhgoUzOwY23gtbU/LbZz505IT09fFzdfkJeXtyE/P19cVFSUlp2dnbr6vlv2S840Lb/y0Cm94HNKJZOODol/XC4J0ApJTOjxFAGILCwvcrwvCX6/f7fT6TzGsuxBjuMOUxR1yOVyHaKp8eOTs7ht0ta0d8IuRTfZjsxYO1Lmu8hZZTjhUGB8UlzwxWcfwOmPc/lHUWNj05cEQfykVqt/VCgUF7q6unj80NnZeblDKjvMhx+fdGxE/EOMqBYjEmJEpRixXRwXnIyPn0HU1XYxne9nZgIQiUT424TFxcVYHwwG4yMqEGFUA4hmQHwAiKZ4Fgf+8s5NtiU6hltgalx6yz+uQAx1v4EP6yC6QIkikUgiIsYQ7wXCRBAFx28LeISopxETDFAygd8lhxAjK5mmZFWPJqRboj4FPLQ3PStromdl7082QZ4KxBcKcAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <img
        class="gatsby-resp-image-image"
        alt="rubocop_traversal.png"
        title="rubocop_traversal.png"
        src="/static/11a55fd9d5d7db346616d26a674a8543/2a432/rubocop_traversal.png"
        srcset="/static/11a55fd9d5d7db346616d26a674a8543/12f09/rubocop_traversal.png 148w,
/static/11a55fd9d5d7db346616d26a674a8543/e4a3f/rubocop_traversal.png 295w,
/static/11a55fd9d5d7db346616d26a674a8543/2a432/rubocop_traversal.png 411w"
        sizes="(max-width: 411px) 100vw, 411px"
        style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
        loading="lazy"
        decoding="async"
      />
  </a>
    </span></p>
<ul>
<li>when the <code class="language-text">Commissioner</code> class is loaded, it loops through node types, defining “original” <code class="language-text">on_#{node_type}</code> methods via <code class="language-text">class_eval</code> (<a href="https://github.com/rubocop/rubocop/blob/2fe4b1a6faca23adff13e1bbff6ecf5b66c6447b/lib/rubocop/cop/commissioner.rb#L59-L76">source</a>).</li>
<li><code class="language-text">#investigate</code> will execute <a href="https://github.com/rubocop/rubocop-ast/blob/5b53037d322275cdd5082e4164f976146cc6c014/lib/rubocop/ast/traversal.rb#L17-L22">#walk</a> (from an included <code class="language-text">Rubocop::AST::Traversal</code> module) on the root node of the AST, which calls the corresponding “original” <code class="language-text">on_#{node_type}</code> methods defined above.</li>
<li>the “original” <code class="language-text">on_#{node_type}</code> methods will execute every relevant cop for the node.</li>
<li>the “original” <code class="language-text">on_#{node_type}</code> methods will also execute <code class="language-text">super</code>, which calls an “inherited” <code class="language-text">on_#{node_type}</code> method (again defined in <code class="language-text">Rubocop::AST::Traversal</code> via metaprogramming, see an example for <a href="https://github.com/rubocop/rubocop-ast/blob/5b53037d322275cdd5082e4164f976146cc6c014/lib/rubocop/ast/traversal.rb#L154-L160">on_send</a>).</li>
<li>the “inherited” method loops through child nodes, again invoking the original <code class="language-text">on_#{node_type}</code> methods in Commissioner, this time with the child nodes.</li>
</ul>
<p>I haven’t dug up the <em>why</em> behind this particular design, my guess so far is (1) metaprogramming makes it easier to support new node types, and (2) this was a way to separate the traversal logic from the cop execution logic.</p>
<p>Note that the classical visitor implementation doesn’t dictate where traversal logic should go. In Rubocop, the main traversal is separate from both object structure and visitors, but in other situations it might work better to put the logic in the object structure (or some parts of it, e.g. composite elements might encapsulate their traversal) or in the visitor itself (e.g. if different visitors need to traverse in a different order)<sup id="fnref-5"><a href="#fn-5" class="footnote-ref">5</a></sup>.</p>
<h2 id="tradeoffs" style="position:relative;"><a href="#tradeoffs" aria-label="tradeoffs permalink" class="autolink-anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Tradeoffs</h2>
<p>Now that we know how Rubocop implements a visitor-inspired pattern, let’s briefly examine the benefits and cost of the design.</p>
<h3 id="benefit-encapsulation-of-each-linting-rule-in-a-visitor" style="position:relative;"><a href="#benefit-encapsulation-of-each-linting-rule-in-a-visitor" aria-label="benefit encapsulation of each linting rule in a visitor permalink" class="autolink-anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Benefit: Encapsulation of each Linting Rule in a Visitor</h3>
<p>Each cop encapsulates the linting and formatting logic for a single rule, making it simple to disable or restrict the scope of that cop, without affecting other cops. In Rubocop, you can disable cops via a <a href="https://docs.rubocop.org/rubocop/1.34/configuration.html#enabled">small config change</a>. The traversal logic will then ignore those cops.</p>
<h3 id="benefit-ease-of-extension-by-adding-new-visitors" style="position:relative;"><a href="#benefit-ease-of-extension-by-adding-new-visitors" aria-label="benefit ease of extension by adding new visitors permalink" class="autolink-anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Benefit: Ease of extension by adding new Visitors</h3>
<p>The object structure and traversal logic is separate from the visitor logic - this makes it easy for a user of the gem (us!) to add and enable new <a href="https://docs.rubocop.org/rubocop/1.33/development.html">custom cops</a>, without needing to touch the object structure or traversal code.</p>
<h3 id="cost-coupling-to-object-structure" style="position:relative;"><a href="#cost-coupling-to-object-structure" aria-label="cost coupling to object structure permalink" class="autolink-anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cost: Coupling to Object Structure</h3>
<p>Changes to the underlying object structure may ripple through all visitors. For example:</p>
<ul>
<li>If node categorisation changes, cops may no longer be checking correctly for those types e.g. in Ruby 3, how pattern matching was parsed <a href="https://github.com/rubocop/rubocop/pull/9873">changed slightly</a>.</li>
<li>If the hierarchy changes and ordering of nodes change, it could break traversal. We saw this coupling earlier in <code class="language-text">DefEndAlignment#on_send</code>, which expects that <code class="language-text">def</code> nodes are children of <code class="language-text">send</code>. If that changes, the cop wouldn’t work properly. Arguably, this is rare in Ruby’s case, and can also be mitigated through more abstract traversal (e.g. <a href="https://docs.rubocop.org/rubocop-ast/node_pattern.html">node pattern</a>, which reminds me a lot of CSS selectors).</li>
</ul>
<h3 id="cost-reduced-encapsulation-of-object-structure" style="position:relative;"><a href="#cost-reduced-encapsulation-of-object-structure" aria-label="cost reduced encapsulation of object structure permalink" class="autolink-anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Cost: Reduced encapsulation of Object Structure</h3>
<p>Depending on the needs of visitors, objects in the structure may need to expose more information, potentially breaking encapsulation. In our example, Rubocop cops need to know about positions in the actual source code through methods like <code class="language-text">#loc</code>, which is less useful for a program emulating the Ruby interpreter - it only needs to execute the logic represented by the node types.</p>
<h2 id="afterword" style="position:relative;"><a href="#afterword" aria-label="afterword permalink" class="autolink-anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Afterword</h2>
<p>I hope this helped concretise when and why you might want to use the visitor pattern. Here are some other examples you may want to look into:</p>
<ul>
<li><code class="language-text">nokogiri</code>, a XML/HTML parsing library, has a <a href="https://github.com/sparklemotion/nokogiri/blob/148bdf5edc1f9963274b57ae899b4f651b53315b/lib/nokogiri/css/xpath_visitor.rb">CSS::XPathVisitor</a>.</li>
<li><code class="language-text">syntax-tree</code>, another Ruby parser, has <a href="https://github.com/ruby-syntax-tree/syntax_tree/blob/main/lib/syntax_tree/visitor.rb">visitor support</a> (see <a href="https://github.com/ruby-syntax-tree/syntax_tree/pull/40/files">PR</a>)</li>
<li><code class="language-text">graphql-ruby</code>, a GraphQL parser, also has an <a href="https://graphql-ruby.org/language_tools/visitor.html">AST Visitor</a></li>
</ul>
<div class="footnotes">
<hr>
<ol>
<li id="fn-2">See <a href="https://en.m.wikipedia.org/wiki/Lint_(software)">Wikipedia</a>.<a href="#fnref-2" class="footnote-backref">↩</a></li>
<li id="fn-3">See class diagram in Visitor chapter of <a href="https://www.amazon.com/Design-Patterns-Object-Oriented-Addison-Wesley-Professional-ebook/dp/B000SEIBB8">Design Patterns book</a>, or on <a href="https://refactoring.guru/design-patterns/visitor#structure">refactoring.guru</a>.<a href="#fnref-3" class="footnote-backref">↩</a></li>
<li id="fn-5">See “Who is responsible for traversing the object structure?” in Visitor chapter,  <a href="https://www.amazon.com/Design-Patterns-Object-Oriented-Addison-Wesley-Professional-ebook/dp/B000SEIBB8">Design Patterns book</a><a href="#fnref-5" class="footnote-backref">↩</a></li>
</ol>
</div></section><section><h2>Related Posts</h2><p><a href="/blog/coupling-and-cohesion-is-a-tradeoff/">Coupling is a Tradeoff</a></p><p><a href="/blog/why-is-polymorphism-important/">Why use Polymorphism in OOP?</a></p></section><section><h2>Comments</h2><div id="comments-container"></div></section><hr style="margin-bottom:1.45rem"/><footer><div style="display:flex;margin-bottom:3.625rem"><div data-gatsby-image-wrapper="" style="width:50px;height:50px;margin-right:0.725rem;margin-bottom:0;min-width:50px;border-radius:100%" class="gatsby-image-wrapper"><div aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear;background-color:#080808;width:50px;height:50px;position:relative"></div><picture><source type="image/webp" data-srcset="/static/2024985cd1fb9cd6a58693ffa2e9ed8c/dbc4a/wasabigeek-logo.webp 50w,/static/2024985cd1fb9cd6a58693ffa2e9ed8c/d8057/wasabigeek-logo.webp 100w" sizes="50px"/><img data-gatsby-image-ssr="" data-main-image="" style="border-radius:50%;opacity:0" sizes="50px" decoding="async" loading="lazy" data-src="/static/2024985cd1fb9cd6a58693ffa2e9ed8c/e9fba/wasabigeek-logo.png" data-srcset="/static/2024985cd1fb9cd6a58693ffa2e9ed8c/e9fba/wasabigeek-logo.png 50w,/static/2024985cd1fb9cd6a58693ffa2e9ed8c/15e42/wasabigeek-logo.png 100w" alt="Nick"/></picture><noscript><picture><source type="image/webp" srcSet="/static/2024985cd1fb9cd6a58693ffa2e9ed8c/dbc4a/wasabigeek-logo.webp 50w,/static/2024985cd1fb9cd6a58693ffa2e9ed8c/d8057/wasabigeek-logo.webp 100w" sizes="50px"/><img data-gatsby-image-ssr="" data-main-image="" style="border-radius:50%;opacity:0" sizes="50px" decoding="async" loading="lazy" src="/static/2024985cd1fb9cd6a58693ffa2e9ed8c/e9fba/wasabigeek-logo.png" srcSet="/static/2024985cd1fb9cd6a58693ffa2e9ed8c/e9fba/wasabigeek-logo.png 50w,/static/2024985cd1fb9cd6a58693ffa2e9ed8c/15e42/wasabigeek-logo.png 100w" alt="Nick"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1)}}</script></div><div><p>By <strong>Nick</strong>, a <!-- -->Business grad turned Software Engineer, living in sunny 🇸🇬. I write mostly about Ruby and Rails, not wasabi (sorry!).</p><div><a class="secondary-link" href="https://twitter.com/wasabigeek" title="Twitter"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-lg " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a><a class="secondary-link" href="https://github.com/wasabigeek" title="GitHub"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-lg " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></div></div></div></footer></article><nav><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/blog/overspecifying-tests-the-employee-report-kata/">← <!-- -->Overspecifying Tests - the Employee Report Kata</a></li><li></li></ul></nav></main><footer>© <!-- -->2022<!-- -->, Built with<!-- --> <a href="https://www.gatsbyjs.org">Gatsby</a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/visitor-pattern-in-ruby-rubocop/";window.___webpackCompilationHash="73cad6855587ccc846b7";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-56f8f3855a255706c5f8.js"],"app":["/app-98b4b141361695085efe.js"],"component---src-pages-404-js":["/component---src-pages-404-js-9ea5a3b2f82e3314434f.js"],"component---src-pages-blog-index-js":["/component---src-pages-blog-index-js-e2ab99c1eb9e6649cb0e.js"],"component---src-pages-index-js":["/component---src-pages-index-js-d24298853577f79f6fe6.js"],"component---src-pages-projects-js":["/component---src-pages-projects-js-0238674562d96881721f.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-850983fc2fd918503030.js"]};/*]]>*/</script><script src="/polyfill-56f8f3855a255706c5f8.js" nomodule=""></script><script src="/component---src-templates-blog-post-js-850983fc2fd918503030.js" async=""></script><script src="/789f7d7b6ffc49f28e70e7c9aef0b26f21ecb947-2a715c18d2ef65f9913f.js" async=""></script><script src="/commons-54de20a7f53efccffaf6.js" async=""></script><script src="/a9a7754c-fd708a4b56a7540148ed.js" async=""></script><script src="/app-98b4b141361695085efe.js" async=""></script><script src="/framework-2f1bb0a7f52c344d3ae3.js" async=""></script><script src="/webpack-runtime-de14b2b98e48ea8035f2.js" async=""></script></body></html>