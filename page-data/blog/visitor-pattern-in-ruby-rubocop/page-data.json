{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/blog/visitor-pattern-in-ruby-rubocop/",
    "result": {"data":{"site":{"siteMetadata":{"title":"wasabigeek"}},"markdownRemark":{"id":"6ef2e9e3-177f-50d2-9d1e-8342c211a3b3","excerpt":"In this post, we’ll learn about the Visitor design pattern and it’s tradeoffs by looking at a real world example: Rubocop, a Ruby linting and formatting library…","html":"<p>In this post, we’ll learn about the Visitor design pattern and it’s tradeoffs by looking at a real world example: Rubocop, a Ruby linting and formatting library.</p>\n<h2 id=\"what-is-the-visitor-design-pattern\" style=\"position:relative;\"><a href=\"#what-is-the-visitor-design-pattern\" aria-label=\"what is the visitor design pattern permalink\" class=\"autolink-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is the Visitor design pattern?</h2>\n<p>The visitor design pattern separates the operation to be performed from a complex object structure (e.g. a graph whose nodes have many types).</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 385px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/80a5d06b70a8b1e494163786d54394f5/409e6/visitor.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86.48648648648648%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAADv0lEQVQ4y21U30sjVxQ+MSJE31rLgi6UPrR9KCvbItv9D1rwbZ/qQ/tQ2G6ffCkiaLEgPhRFUDCKJkIFCSEiIvqi0Qjij1iNJpnRuTNzZyZ3dOLkJ4Zau5pNbjmDCVvshcuZezjnu+ee7zsDAOAGgM6GhobnLpfrawD4CgCa4X+Wz+dz9vr6OgwPD6OrAQA+A4Ang4ODsLa2BtDa2grt7e0tAPBRU1NTu8fj+bClpQU8Hs8jwOnpaZiamgKv19s8Pz//NBQKtc3Ozn7i9Xo/DgaDbX6//wn4/X5XIBCA7u5u9+TkJPT09MDAwICrt7f3EaBhGG5d10GW5e/v7u7+yefzV4lEwjZN0y6Xy9f5fP5PSCQSsLu722nbNmOMrfX19XkmJibQ9wiQMdbIGEPgN8VikedyOX5xccGvrq54qVTitm2nQFEUEAShj1LKdV3ngiB8Kooi6LreWANaWlpyrCzLbk3TQNO014lEgu/t7d2LoliJxWLvTk5OOCFEgZWVFRgaGmrLZDI+SukvANAYiUSgWq0C57y+cWma5gBSSl9fXl5yxljZsqyqaZoVPBuGQTHYhaxiUqFQwLzWg4ODb23bfoG+SqXiqgFSSp0eYoWKovBkMnlPKa1IkvTu/Pyca5qm1m53KJ2bm4P9/f1vDMNwbt/Y2PgyHA5DNBpFeThtMAwD7RvGGMc2pVIpp1WmaWJOCvvyq67rx8fHxx22bUMoFHqlaRoGvN3a2urY3t6Gw8NDB1CSJLcsy0AI+UFRlLeiKNqU0pwkSVlVVUuU0iPAUi3L4rFYbO6h2mafz/cqEom83NzchJ2dnfqTx8fHYWxsDEZHRz8IBALPw+Hws2g0+gzt4uJix8zMzOeQSqV+z+VyJ/F4/EUqlXIS3yfjfVIYY26Ujaqq35XL5UyhUFDj8biWTqcp5/yiWCxu1xNKpRKMjIxAV1dX48LCQicCLC8vO/vo6Og/OtR1/WfUYSaTcfqXTqf59fU16vHCYfkB1I2WEPJHNpvlkiT99uBvWF1dfcQyEiKK4j1KRlGUMp41TVMc0eLo1SpVVTWBmiKELNUA8WdQA6zpEAEIIQhUlWUZQZF1Wh8ry7JclmUhk19ks9mBZDL5FCXCGKuToqpqvUJCCBJZliSpKghCJZlMckVR1DrgQzWufD7vfCNBNzc3rtvb2zopuq67H3T4E84wY6yCCkFNojVNU3MCg8Fg/cmmaWJFbkEQXJlMBlCb/f39TtzZ2ZmbEIJS+xHldnp6+hch5G9BEG5wWhRFEf8FwsopIuWgP/oAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"visitor.png\"\n        title=\"visitor.png\"\n        src=\"/static/80a5d06b70a8b1e494163786d54394f5/409e6/visitor.png\"\n        srcset=\"/static/80a5d06b70a8b1e494163786d54394f5/12f09/visitor.png 148w,\n/static/80a5d06b70a8b1e494163786d54394f5/e4a3f/visitor.png 295w,\n/static/80a5d06b70a8b1e494163786d54394f5/409e6/visitor.png 385w\"\n        sizes=\"(max-width: 385px) 100vw, 385px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>This makes it easy to introduce new operations (“visitors”) for the same structure, but comes at a cost - changing the object structure requires all visitors to be changed. So this pattern works best when changes to the underlying structure are rare, and we expect many different operations to be introduced.</p>\n<h2 id=\"what-is-rubocop\" style=\"position:relative;\"><a href=\"#what-is-rubocop\" aria-label=\"what is rubocop permalink\" class=\"autolink-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is Rubocop?</h2>\n<p>Rubocop is a linter<sup id=\"fnref-1\"><a href=\"#fn-1\" class=\"footnote-ref\">1</a></sup> and formatter, which is a fancy way of saying that it checks the raw source code against a set of rules (e.g. for common errors or conformance to a style guide) and can autocorrect it. Each rule in Rubocop is called a “cop” and follows a visitor-inspired pattern.</p>\n<p>Note that Rubocop doesn’t follow the classical visitor implementation<sup id=\"fnref-2\"><a href=\"#fn-2\" class=\"footnote-ref\">2</a></sup> exactly, but separates concerns similarly. We’ll look at how it tweaks the pattern, before describing the tradeoffs with real-life examples.</p>\n<h2 id=\"object-structure-abstract-syntax-tree-ast\" style=\"position:relative;\"><a href=\"#object-structure-abstract-syntax-tree-ast\" aria-label=\"object structure abstract syntax tree ast permalink\" class=\"autolink-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Object Structure: Abstract Syntax Tree (AST)</h2>\n<p>Before running any cops, Rubocop first uses the <a href=\"https://github.com/rubocop/rubocop-ast\">rubocop-ast</a> library to create an Abstract Syntax Tree representing your Ruby code. This makes the responsibility of cops much simpler: they don’t have to worry about syntax correctness, and because code is pre-grouped and categorised in the tree, it’s easier to know when a linting rule should be triggered.</p>\n<p>Let’s look at a simple example:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">require</span> <span class=\"token string-literal\"><span class=\"token string\">'rubocop-ast'</span></span>\n\ncode_string <span class=\"token operator\">=</span> <span class=\"token string-literal heredoc-string\"><span class=\"token delimiter\"><span class=\"token punctuation\">&lt;&lt;~</span><span class=\"token symbol\">CODE</span></span><span class=\"token string\">\n  private def sum(a, b)\n    a + b\n  end\n\n  sum(1, 2)\n</span><span class=\"token delimiter\"><span class=\"token symbol\">CODE</span></span></span>\n<span class=\"token comment\"># => \"private def sum(a, b)\\n a + b\\nend\\n\\nsum(1, 2)\\n\"</span>\n\nprocessed_source <span class=\"token operator\">=</span> RuboCop<span class=\"token double-colon punctuation\">::</span><span class=\"token constant\">AST</span><span class=\"token double-colon punctuation\">::</span><span class=\"token class-name\">ProcessedSource</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">new</span><span class=\"token punctuation\">(</span>code_string<span class=\"token punctuation\">,</span> <span class=\"token number\">3.1</span><span class=\"token punctuation\">)</span>\nprocessed_source<span class=\"token punctuation\">.</span>ast\n<span class=\"token comment\"># =></span>\n<span class=\"token comment\"># s(:begin,</span>\n<span class=\"token comment\">#   s(:send, nil, :private,</span>\n<span class=\"token comment\">#     s(:def, :sum,</span>\n<span class=\"token comment\">#       s(:args,</span>\n<span class=\"token comment\">#         s(:arg, :a),</span>\n<span class=\"token comment\">#         s(:arg, :b)),</span>\n<span class=\"token comment\">#       s(:send,</span>\n<span class=\"token comment\">#         s(:lvar, :a), :+,</span>\n<span class=\"token comment\">#         s(:lvar, :b))),</span>\n<span class=\"token comment\">#   s(:send, nil, :sum,</span>\n<span class=\"token comment\">#     s(:int, 1),</span>\n<span class=\"token comment\">#     s(:int, 2)))</span></code></pre></div>\n<p>The parsed AST breaks down the code into relevant constructs based on Ruby’s syntax. We can visualize the above:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fa167f4ce62165dacc4468696a171423/8ce52/ruby_ast_example.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.72972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAADwklEQVQ4y3VSfWgbZRh/7rK0OqaIKzIYdog4HK66OZ3raFe66Ryof8iCImwgsvmPokyRgaKIGyobKwPFqYigbDrYUPBr0dZ+JLm0Ta5JmuSSXHNJ7vsub+6SXK+xWiUn7zUJ69AHHp7nfT5+7/N73hd29D8GO/cedPWe7bsBi2edF36dKRGc7QBrO92hpKIHk9qJQEKCsUjBg2sIgnBr79+9Hx4ePAQPDRyCHXsehY44jkNgPTA82Im9M3LRjQcS8rEIW++boHl8dnO7HhlwfZzn6w5oyw7ECotrAF3t6dnYDQCuer1d2Ha1c5vv3HJTO3d7zx3Y9+B4Tm8CZziQkv4C+M5Pkf4QA8F55bNAQnk/wqhw6fsxz11bt7sXbdzUC1zF8Xx1dYzE51tuvQ3Of36ZZJEDVMbsDc7Ls4Gk3jeVUGA0UiTxzWS8sAjTTPksldLfTJbqbmw6vwxPHT7igtZaNPf090M6nXZp0qID0fzi5nBa91NMZVuIMaHuOGR7J542rbb/2tvn4JWTpzo7w9bn88HQ0NCa2HV9pGslSUoihO7LZLJf5LLMqVDWHqRSWpytOzf/GMp3GsapOPClIiCEQBTFK4qifFgscNeyRf10OGP8EmWrH1Bp5AfTNL/mef5uUZJOyhJ/3B+Rd0VyxqULlyfXY6CDT/o8N05jGMZpVdNeKuvauQWh8iLN2SNznPUyzVkjbkGpVIJms3kjBWLrtj73JfGr/tmiuW9gr5tfWVmBf/5eAd1srO1rNpte0zSBF4Rjksj/HmXNZ6m0nmKrzoYfghx+kO7gvBIOpbTnwykVJmMC3hXZaDTWoUoFVFXdh1CFVhRlRBTFCSiXy+QqoHigrKvvzmYr/VRa/0hoOF0TzB9gO45nOoPO0Hlr+OdQDqikSibicxiIwH2SJN1bq9XOaJp2VNW09zqjyrIMzRbVNuXWn/det4b1X377E5w9fwHM+pIbw6DYNhoNWFpaWl32DGuR4Wwd5jhr/2y2komytU9mMmgqulC7OJ3Wr9Rr5mhRLH8cZhBL560H40Ub5vIW2QLEA5C2bbsKsVgMAoxFTCYNmEpXt/wWFV8fT6AnRqPS8YlE+Rn/TOk526qe4AT96Wuz4htBprZpKmXCZNIgaJp2+/Fnj0ajkMlkVjkJRZbIMvOQz6V7hRL3qiwUHy/kcy9osnCYW8j6NE2FCDW+gS/m30Ka2LPcsKCiy/C/IssyKUkSSLI8bBjGgqZpnyKEggihqwihb6rVKvC88IBhmqYoSjtNswq6rpP/BfYvm0XPd5EAuMYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ruby_ast_example.png\"\n        title=\"ruby_ast_example.png\"\n        src=\"/static/fa167f4ce62165dacc4468696a171423/fcda8/ruby_ast_example.png\"\n        srcset=\"/static/fa167f4ce62165dacc4468696a171423/12f09/ruby_ast_example.png 148w,\n/static/fa167f4ce62165dacc4468696a171423/e4a3f/ruby_ast_example.png 295w,\n/static/fa167f4ce62165dacc4468696a171423/fcda8/ruby_ast_example.png 590w,\n/static/fa167f4ce62165dacc4468696a171423/8ce52/ruby_ast_example.png 681w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>For now, it’s sufficient to know that the object structure is basically a tree - don’t worry too much if you don’t understand exactly how it works. (For a good overview of how this AST fits into the Ruby interpretation process, check out this <a href=\"https://youtu.be/ySuMOEVLaMw\">great video</a> by <a href=\"https://twitter.com/OngMaple\">@OngMaple</a>. You can also look <a href=\"https://github.com/rubocop/rubocop-ast/blob/master/docs/modules/ROOT/pages/node_types.adoc\">here</a> for a list of possible node types 🤯.)</p>\n<h2 id=\"visitor-cops\" style=\"position:relative;\"><a href=\"#visitor-cops\" aria-label=\"visitor cops permalink\" class=\"autolink-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Visitor: Cops</h2>\n<p>Each linting or formatting rule in Rubocop is encapsulated in a “cop”, which is essentially a visitor. For example, let’s look at the <a href=\"https://github.com/rubocop/rubocop/blob/master/lib/rubocop/cop/layout/def_end_alignment.rb\">DefEndAlignment</a> cop. By default, this checks that <code class=\"language-text\">end</code> is aligned to <code class=\"language-text\">def</code> at the start of the line, e.g.:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token comment\"># bad</span>\n<span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">foo</span></span>\n    <span class=\"token keyword\">end</span>\n\n<span class=\"token comment\"># good</span>\n<span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">foo</span></span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>Each cop defines <code class=\"language-text\">on_#{node_type}</code> methods, which the traversal mechanism will call when it hits a corresponding AST node. We can see the cop handles 3 node types, <code class=\"language-text\">on_def</code>, <code class=\"language-text\">on_defs</code> and <code class=\"language-text\">on_send</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"ruby\"><pre class=\"language-ruby\"><code class=\"language-ruby\"><span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">on_def</span></span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span>\n  <span class=\"token comment\"># ...</span>\n<span class=\"token keyword\">end</span>\n<span class=\"token keyword\">alias</span> on_defs on_def\n\n<span class=\"token keyword\">def</span> <span class=\"token method-definition\"><span class=\"token function\">on_send</span></span><span class=\"token punctuation\">(</span>node<span class=\"token punctuation\">)</span>\n  <span class=\"token comment\"># ...</span>\n<span class=\"token keyword\">end</span></code></pre></div>\n<p>(<code class=\"language-text\">on_send</code> might seem out-of-place - it’s for handling “def modifiers” e.g. <code class=\"language-text\">private</code> in <code class=\"language-text\">private def foo</code>.)</p>\n<p>If you recall the AST from before, there weren’t any <code class=\"language-text\">end</code> nodes, and the structure itself left out indentations and spaces. So how does this linter work? Turns out that <code class=\"language-text\">parser</code> nodes still contain information about the source code (e.g. positions), and cops can use this in tandem with the original source code for linting.</p>\n<p>Of note: this cop also does it’s own little traversal for <code class=\"language-text\">on_send</code>. This is because the <code class=\"language-text\">send</code> node contains the start position of the <code class=\"language-text\">private</code> keyword, but the position of <code class=\"language-text\">end</code> is still in the  <code class=\"language-text\">def</code> node. Thus, the code accesses <a href=\"https://github.com/rubocop/rubocop/blob/133ffce3d3179f6cf2d7750da2a2da0add8c7e41/lib/rubocop/cop/layout/def_end_alignment.rb#L51\">descendants</a> to look for the actual <code class=\"language-text\">def</code> node. A visual from our previous example:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 212px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/31cc05831c7b3e162da8b84f4e3b6440/9f128/on_send_def_traversal.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 71.62162162162163%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAADT0lEQVQ4y41TX0xTZxQ/lzKnTz5MZpNpdDAyMrcEzUwajWJ82R6W+LC5CcO9zF4UjAnBB/89eE2JksADxr2Arsw5l2ywlHvL6N1tg7SlVdbeUitevBS95baG9rYUI7belvWYr2qyLVnGL/nl9/055/ed5HwH4F9ARDh4liVKkbVneulkRC08m04Udf+D5U5yRmi5HoD2y274X5BgQdQqHEENRgMpU1h5hqHZDP4pJTEYXcKxyNJnk9E8+GaeGNovj6/O0Ht/qfJONAd+ebmZmFy9ac/1/8Tl3KKCYmylQysgzGml1RsO+xKUdVSG70flTVNKPv0wjahkECOqXhh0xz4ccsfAEUhWfH08AKvGyES0YlIugs2bqvdKjx0eKe6x307uSWYQbKLDcHqoiWI4M8VwdFnPs2ZgWPN/G7773vvlxnQPfQeH+mtrmvvqP7oi9ELL9V1gGWktJzMcIf03pf/h8QYAvAkAa8qkqDVvb1m/llyc+fHILou9taVz5MQ2hjXvYDh6O8PS9Qxn3s5wdD3Dmt9hWBoIoa6ujiJJ1dXVm41G42aDwbABAKoIqQqooqBywyeH9tZ09B0+cNHR1nB++EgDw9ENDGvex7D0bou97XOLvbXv0u8dteeGv3xZWiqVIvIBachrGI3Gsu7d00BkHQC81XK2GToDh6FzpA0ucN/CqcFvwD+zDKeGDt5svLpx07nBEy+76nK5jvI87+V5/hjZm0wm6O7uNkSjUejp6dnqdDpv8H/ww9Yfrm3DLMLP4wOVtkct5Y/vDGlN49MqP3Y33QFgomBiYuJSoVBAAl3X0e/3M7qul6trbGysSiaTj/AVMplMtqurq+arA/vhgYYwFk4fkxIFVBYR5eRf6L63eANUVS0Vi8UVQRD0UqlEkuZIc2w2GwSDwSZRFNHj8eSdTmfO5/NhKBRqfz1+U8rzgDi7iFeu/aoL/pnCbAoRZFmWyeuapulEFUXxkuDe3l5gWXZfLBbDbDaLCwsLK6qqosvl+iISDsITRJicXf5Nij9Ht6joEeUpTin5LFit1p2JRGKemMXj8fmBgYGPBUEgFRiIcTgc7srn81gsFlGSpP5X00SN3XsKv9xSaoMPc9JcGvHuvJ5i/YlPXwAv1yLiTz5IgQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"on_send_def_traversal.png\"\n        title=\"on_send_def_traversal.png\"\n        src=\"/static/31cc05831c7b3e162da8b84f4e3b6440/9f128/on_send_def_traversal.png\"\n        srcset=\"/static/31cc05831c7b3e162da8b84f4e3b6440/12f09/on_send_def_traversal.png 148w,\n/static/31cc05831c7b3e162da8b84f4e3b6440/9f128/on_send_def_traversal.png 212w\"\n        sizes=\"(max-width: 212px) 100vw, 212px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Also note that unlike the classical implementation, cops do not implement methods for all node types. Instead, there’s logic that skips non-existent methods during traversal, which is a nice segue to our next section.</p>\n<h2 id=\"execution--traversal\" style=\"position:relative;\"><a href=\"#execution--traversal\" aria-label=\"execution  traversal permalink\" class=\"autolink-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Execution &#x26; Traversal</h2>\n<p>Object structure and visitors meet in the <a href=\"https://github.com/rubocop/rubocop/blob/2fe4b1a6faca23adff13e1bbff6ecf5b66c6447b/lib/rubocop/cop/commissioner.rb#L79-L93\">Rubocop::Commissioner#investigate</a> method. This method walks the tree and for each node, executes the respective <code class=\"language-text\">on_#{node_type}</code> method on all enabled cops.</p>\n<p>The actual implementation is a little convoluted, with a fair amount of metaprogramming. It’s a fun detour, but feel free to skip this! First, my attempt to visualise the flow with a sequence diagram:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 411px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/11a55fd9d5d7db346616d26a674a8543/2a432/rubocop_traversal.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 102.7027027027027%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAYAAABG1c6oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFMklEQVQ4y4VTa0xTZxh+C7UDcbKiTNBoYInZYkI2RjLdmAGZzpmpU1hcNg1xLjHZsvjHEJOxC3PTuhmcv0CjGQ4ichkg9EYrOy13elFoOfTOOT3ntGBLgRYoFYu8y+lKMreZvcmT7z3nPHm+8z3f84LNZgObzfYWTdPIMMwKTdMrHMehx+PRIyIgopCiKLDb7YUURSH/neexLIssy/bHOQJYLY/HA16vd5fX60WO48I0TYf5fnp6epUs9Pl8PG+3x+NBv9+/wLJsmN/U7/dr/y64vLwMUFZWxkNUV1e3VaPRbKmoqNheUvJhZto6SB52LEGA6RYhTiS0NlSlNDbc3qZQKLecO3fupXf379+0J39H8rBlCmbcCuHyTK8wGugWwo0bN2LQ6/XAMAzs27c/eaC//+iYjTni9mFWdNYI+FgPGBoCr0sLI2YrVFdfyzAY9KWaXuP7TmYud8mnBnx0HzCiB6ivr49BLpcn1NbWwvnvv81s75CdcZDdNGMjDBjsOYtzA+UYHjq/4JG+Yh1WwvVrVa9qtD3fjRo7XeNjBINzg+UY6v8KF4bK4Z+1bu2aDN4Xt/mO3KCtQcdwC85yBHpscvTZm48O99XC+pSEGIcZbdTwHOdwKwY9GvTaFRg7Jo/5+XkoKiqC05+WPNdUUwGctcNgNbbgqK4JdZrfkCalGPYqj+DCA7h84WzK9StngB272zOmb0bzYMPiwL1fl0hd01Lsr+I3FevzXns5CReGIMTKP59xd1bPe7sqA5SycmW2v2rZr9iBizo4efxgSsjbA0FW3T/NEDg30bPCr8tBPcJ/1JrfG2oS5qZIYCkz+Lx2oJ0jEA66ATEEuOgSFOTnJnFWOYQ49T3+mKxFOseMScPRmcEwVFdX7zUajXc0Gk2jUqks5hUPHzoIU/7JTXa77QTjpj9yOh0nXC7He3zeHj9BSF2/VoSRdoh6ajbgkmwzPlFm4EpnZtBxPRNycnKyJRLJ9vLy8u0HDhzYmpqa+gJ//OLi4k0ymexrgiDKVCrVN62traVxW8TitLSUmFVLKkAcBEQDIN6HR94WgMLCQrh58yZcvXoVCgoKeF4iSZK7TCbTMYvFUkiSZJHZbN5jtVr3kST5iU6n2wEACROTAfBZbwnmmeanALm5uYLKykpBaWnp6jyura+vP9nX1/ezWq2WqNXqSyqV6pJWq71IEMTltra2d3hSKBQSwP/VqVOnICsrKymWQ7cbdDoduFwusFgsQNM0BAIB8HAsvP3m60lzrEIYoBTCaVoZW2fcncJZViX8l2h2dnYyL9jb27vbaDS2j4yM1JtMphaDwVCt0+lf3Jyx8XneFtrcBO7RlhgoUzOwY23gtbU/LbZz505IT09fFzdfkJeXtyE/P19cVFSUlp2dnbr6vlv2S840Lb/y0Cm94HNKJZOODol/XC4J0ApJTOjxFAGILCwvcrwvCX6/f7fT6TzGsuxBjuMOUxR1yOVyHaKp8eOTs7ht0ta0d8IuRTfZjsxYO1Lmu8hZZTjhUGB8UlzwxWcfwOmPc/lHUWNj05cEQfykVqt/VCgUF7q6unj80NnZeblDKjvMhx+fdGxE/EOMqBYjEmJEpRixXRwXnIyPn0HU1XYxne9nZgIQiUT424TFxcVYHwwG4yMqEGFUA4hmQHwAiKZ4Fgf+8s5NtiU6hltgalx6yz+uQAx1v4EP6yC6QIkikUgiIsYQ7wXCRBAFx28LeISopxETDFAygd8lhxAjK5mmZFWPJqRboj4FPLQ3PStromdl7082QZ4KxBcKcAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"rubocop_traversal.png\"\n        title=\"rubocop_traversal.png\"\n        src=\"/static/11a55fd9d5d7db346616d26a674a8543/2a432/rubocop_traversal.png\"\n        srcset=\"/static/11a55fd9d5d7db346616d26a674a8543/12f09/rubocop_traversal.png 148w,\n/static/11a55fd9d5d7db346616d26a674a8543/e4a3f/rubocop_traversal.png 295w,\n/static/11a55fd9d5d7db346616d26a674a8543/2a432/rubocop_traversal.png 411w\"\n        sizes=\"(max-width: 411px) 100vw, 411px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li>when the <code class=\"language-text\">Commissioner</code> class is loaded, it loops through node types, defining “original” <code class=\"language-text\">on_#{node_type}</code> methods via <code class=\"language-text\">class_eval</code> (<a href=\"https://github.com/rubocop/rubocop/blob/2fe4b1a6faca23adff13e1bbff6ecf5b66c6447b/lib/rubocop/cop/commissioner.rb#L59-L76\">source</a>).</li>\n<li><code class=\"language-text\">#investigate</code> will execute <a href=\"https://github.com/rubocop/rubocop-ast/blob/5b53037d322275cdd5082e4164f976146cc6c014/lib/rubocop/ast/traversal.rb#L17-L22\">#walk</a> (from an included <code class=\"language-text\">Rubocop::AST::Traversal</code> module) on the root node of the AST, which calls the corresponding “original” <code class=\"language-text\">on_#{node_type}</code> methods defined above.</li>\n<li>the “original” <code class=\"language-text\">on_#{node_type}</code> methods will execute every relevant cop for the node.</li>\n<li>the “original” <code class=\"language-text\">on_#{node_type}</code> methods will also execute <code class=\"language-text\">super</code>, which calls an “inherited” <code class=\"language-text\">on_#{node_type}</code> method (again defined in <code class=\"language-text\">Rubocop::AST::Traversal</code> via metaprogramming, see an example for <a href=\"https://github.com/rubocop/rubocop-ast/blob/5b53037d322275cdd5082e4164f976146cc6c014/lib/rubocop/ast/traversal.rb#L154-L160\">on_send</a>).</li>\n<li>the “inherited” method loops through child nodes, again invoking the original <code class=\"language-text\">on_#{node_type}</code> methods in Commissioner, this time with the child nodes.</li>\n</ul>\n<p>I haven’t dug up the <em>why</em> behind this particular design, my guess so far is (1) metaprogramming makes it easier to support new node types, and (2) this was a way to separate the traversal logic from the cop execution logic.</p>\n<p>Note that the classical visitor implementation doesn’t dictate where traversal logic should go. In Rubocop, the main traversal is separate from both object structure and visitors, but in other situations it might work better to put the logic in the object structure (or some parts of it, e.g. composite elements might encapsulate their traversal) or in the visitor itself (e.g. if different visitors need to traverse in a different order)<sup id=\"fnref-3\"><a href=\"#fn-3\" class=\"footnote-ref\">3</a></sup>.</p>\n<h2 id=\"tradeoffs\" style=\"position:relative;\"><a href=\"#tradeoffs\" aria-label=\"tradeoffs permalink\" class=\"autolink-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tradeoffs</h2>\n<p>Now that we know how Rubocop implements a visitor-inspired pattern, let’s briefly examine the benefits and cost of the design.</p>\n<h3 id=\"benefit-encapsulation-of-each-linting-rule-in-a-visitor\" style=\"position:relative;\"><a href=\"#benefit-encapsulation-of-each-linting-rule-in-a-visitor\" aria-label=\"benefit encapsulation of each linting rule in a visitor permalink\" class=\"autolink-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Benefit: Encapsulation of each Linting Rule in a Visitor</h3>\n<p>Each cop encapsulates the linting and formatting logic for a single rule, making it simple to disable or restrict the scope of that cop, without affecting other cops. In Rubocop, you can disable cops via a <a href=\"https://docs.rubocop.org/rubocop/1.34/configuration.html#enabled\">small config change</a>. The traversal logic will then ignore those cops.</p>\n<h3 id=\"benefit-ease-of-extension-by-adding-new-visitors\" style=\"position:relative;\"><a href=\"#benefit-ease-of-extension-by-adding-new-visitors\" aria-label=\"benefit ease of extension by adding new visitors permalink\" class=\"autolink-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Benefit: Ease of extension by adding new Visitors</h3>\n<p>The object structure and traversal logic is separate from the visitor logic - this makes it easy for a user of the gem (us!) to add and enable new <a href=\"https://docs.rubocop.org/rubocop/1.33/development.html\">custom cops</a>, without needing to touch the object structure or traversal code.</p>\n<h3 id=\"cost-coupling-to-object-structure\" style=\"position:relative;\"><a href=\"#cost-coupling-to-object-structure\" aria-label=\"cost coupling to object structure permalink\" class=\"autolink-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cost: Coupling to Object Structure</h3>\n<p>Changes to the underlying object structure may ripple through all visitors. For example:</p>\n<ul>\n<li>If node categorisation changes, cops may no longer be checking correctly for those types e.g. in Ruby 3, how pattern matching was parsed <a href=\"https://github.com/rubocop/rubocop/pull/9873\">changed slightly</a>.</li>\n<li>If the hierarchy changes and ordering of nodes change, it could break traversal. We saw this coupling earlier in <code class=\"language-text\">DefEndAlignment#on_send</code>, which expects that <code class=\"language-text\">def</code> nodes are children of <code class=\"language-text\">send</code>. If that changes, the cop wouldn’t work properly. Arguably, this is rare in Ruby’s case, and can also be mitigated through more abstract traversal (e.g. <a href=\"https://docs.rubocop.org/rubocop-ast/node_pattern.html\">node pattern</a>, which reminds me a lot of CSS selectors).</li>\n</ul>\n<h3 id=\"cost-reduced-encapsulation-of-object-structure\" style=\"position:relative;\"><a href=\"#cost-reduced-encapsulation-of-object-structure\" aria-label=\"cost reduced encapsulation of object structure permalink\" class=\"autolink-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cost: Reduced encapsulation of Object Structure</h3>\n<p>Depending on the needs of visitors, objects in the structure may need to expose more information, potentially breaking encapsulation. In our example, Rubocop cops need to know about positions in the actual source code through methods like <code class=\"language-text\">#loc</code>, which is less useful for a program emulating the Ruby interpreter - it only needs to execute the logic represented by the node types.</p>\n<h2 id=\"afterword\" style=\"position:relative;\"><a href=\"#afterword\" aria-label=\"afterword permalink\" class=\"autolink-anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Afterword</h2>\n<p>I hope this helped concretise when and why you might want to use the visitor pattern. Here are some other examples you may want to look into:</p>\n<ul>\n<li><code class=\"language-text\">nokogiri</code>, a XML/HTML parsing library, has a <a href=\"https://github.com/sparklemotion/nokogiri/blob/148bdf5edc1f9963274b57ae899b4f651b53315b/lib/nokogiri/css/xpath_visitor.rb\">CSS::XPathVisitor</a>.</li>\n<li><code class=\"language-text\">syntax-tree</code>, another Ruby parser, has <a href=\"https://github.com/ruby-syntax-tree/syntax_tree/blob/main/lib/syntax_tree/visitor.rb\">visitor support</a> (see <a href=\"https://github.com/ruby-syntax-tree/syntax_tree/pull/40/files\">PR</a>)</li>\n<li><code class=\"language-text\">graphql-ruby</code>, a GraphQL parser, also has an <a href=\"https://graphql-ruby.org/language_tools/visitor.html\">AST Visitor</a></li>\n</ul>\n<p>I was invited to share about this at RubySG, here’s a video with some cold jokes:\n<div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 50%; position: relative; height: 0; overflow: hidden; \" > <div class=\"embedVideo-container\"> <iframe title=\"Talk: How Rubocop uses the Visitor Pattern\" src=\"https://www.youtube.com/embed/psOz2Lgp6KU?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" loading=\"lazy\" allowfullscreen=\"\" sandbox=\"allow-same-origin allow-scripts allow-popups\"></iframe> </div> </div></p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-1\">See <a href=\"https://en.m.wikipedia.org/wiki/Lint_(software)\">Wikipedia</a>.<a href=\"#fnref-1\" class=\"footnote-backref\">↩</a></li>\n<li id=\"fn-2\">See class diagram in Visitor chapter of <a href=\"https://www.amazon.com/Design-Patterns-Object-Oriented-Addison-Wesley-Professional-ebook/dp/B000SEIBB8\">Design Patterns book</a>, or on <a href=\"https://refactoring.guru/design-patterns/visitor#structure\">refactoring.guru</a>.<a href=\"#fnref-2\" class=\"footnote-backref\">↩</a></li>\n<li id=\"fn-3\">See “Who is responsible for traversing the object structure?” in Visitor chapter,  <a href=\"https://www.amazon.com/Design-Patterns-Object-Oriented-Addison-Wesley-Professional-ebook/dp/B000SEIBB8\">Design Patterns book</a><a href=\"#fnref-3\" class=\"footnote-backref\">↩</a></li>\n</ol>\n</div>","frontmatter":{"title":"Visitor Pattern in Ruby: Examples from Rubocop","date":"August 09, 2022","updated_date":"September 08, 2022","description":"The visitor design pattern separates the operation to be performed from the object structure. We look at a concrete implementation in Rubocop, a Ruby linting and formatting library."}}},"pageContext":{"slug":"/blog/visitor-pattern-in-ruby-rubocop/","previous":{"fields":{"slug":"/blog/overspecifying-tests-the-employee-report-kata/"},"frontmatter":{"title":"Overspecifying Tests - the Employee Report Kata","tags":["katas","testing"],"date":"2022-06-22","updated_date":null}},"next":null,"relatedPosts":[{"node":{"fields":{"slug":"/blog/coupling-and-cohesion-is-a-tradeoff/"},"frontmatter":{"title":"Coupling is a Tradeoff","tags":["software-design","coupling-and-cohesion"],"date":"2022-06-08","updated_date":null}}},{"node":{"fields":{"slug":"/blog/why-is-polymorphism-important/"},"frontmatter":{"title":"Why use Polymorphism in OOP?","tags":["object-oriented","software-design","dependency-inversion-principle"],"date":"2022-03-20","updated_date":null}}}],"updatedDate":"2022-09-08"}},
    "staticQueryHashes": ["2744205926","2841359383"]}